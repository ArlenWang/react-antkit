{"ast":null,"code":"var _jsxFileName = \"/Users/mljfnn/Desktop/demos/react/antkit/src/views/SearchResult.jsx\";\nimport React from 'react';\nimport TabsTop from '../components/TabsTop.jsx';\nimport DropMenu from '../components/DropMenu.jsx';\nimport TwoItem from '../components/TwoItem.jsx';\nimport ThreeItem from '../components/ThreeItem.jsx';\nimport FourItem from '../components/FourItem.jsx';\nimport DetailTop from '../components/DetailTop';\nimport BackBar from '../components/BackBar';\nimport ReactDOM from 'react-dom';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.rowData = data => {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, this.state.loading ? React.createElement(\"div\", {\n        style: {\n          width: \"28vw\",\n          margin: \"auto\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(ActivityIndicator, {\n        text: \"\\u6B63\\u5728\\u52A0\\u8F7D...\",\n        color: \"white\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      })) : null, data.map((item, index) => {\n        switch (item.goods_list.length) {\n          case 2:\n            return React.createElement(TwoItem, {\n              itemData: item,\n              key: index,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 71\n              },\n              __self: this\n            });\n          //break;\n\n          case 3:\n            return React.createElement(ThreeItem, {\n              itemData: item,\n              key: index,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 74\n              },\n              __self: this\n            });\n          //break;\n\n          case 4:\n            return React.createElement(FourItem, {\n              itemData: item,\n              key: index,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 77\n              },\n              __self: this\n            });\n          //break;\n\n          default:\n            return React.createElement(\"div\", {\n              key: index,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 80\n              },\n              __self: this\n            }, \"erro\");\n        }\n      }));\n    };\n\n    this.tabClick = index => {\n      if (index !== this.state.tabActive) {\n        this.setState({\n          tabActive: index\n        });\n        this.netListdata(tabTypeID[index]);\n      }\n    };\n\n    this.dropFun = index => {\n      if (index !== this.state.dropActive) {\n        this.setState({\n          dropActive: index\n        });\n        this.netListdata(null, dropTypeID[index]);\n      }\n    };\n\n    this.onScrollEvent = () => {\n      this.scollNum++;\n      let thisNum = parseInt(this.scollNum, 10);\n\n      if (!this.state.isAlpha && !this.changeAlpha && !this.lock) {\n        this.setState({\n          isAlpha: true\n        });\n        this.changeAlpha = true;\n      }\n\n      setTimeout(() => {\n        this.changeAlpha = false;\n      }, 300);\n      setTimeout(() => {\n        if (thisNum === this.scollNum) {\n          if (this.state.isAlpha) this.setState({\n            isAlpha: false\n          });\n        }\n      }, 500);\n    };\n\n    this.scollNum = 0;\n    this.state = {\n      menuTop: 338,\n      isAlpha: false,\n      dataSource: [],\n      tabActive: 0,\n      dropActive: 0,\n      loading: false\n    };\n    this.changeAlpha = false;\n    this.lock = false;\n    this.loading = false;\n  }\n\n  componentWillUnmount() {\n    this.lock = true;\n  }\n\n  componentDidMount() {\n    let topV = ReactDOM.findDOMNode(this.rightBtn).offsetTop;\n    topV = topV + 58;\n    this.setState({\n      menuTop: topV\n    });\n    this.netListdata();\n  }\n\n  loadingEnd() {\n    this.loading = false;\n    if (!this.lock) this.setState({\n      loading: false\n    });\n  }\n\n  loadingStart() {\n    this.loading = true;\n    this.setState({\n      loading: true\n    });\n  }\n\n  netListdata(cid, num) {\n    /*\n    cid 3 美妆 4 日用品 6 美食 \n    num 0 全部 2\b 两个组合\n    */\n    let req = \"?cid=\" + (cid ? cid : tabTypeID[this.state.tabActive]) + \"&num=\" + (num ? num : dropTypeID[this.state.dropActive]);\n    let thisUrl = api.index_list + req;\n    if (this.loading) return;\n    this.loadingStart();\n    get(thisUrl, res => {\n      this.loadingEnd(); //console.log(res);\n\n      if (res && res['result'] === 'success') {\n        this.setState({\n          dataSource: res['data']\n        });\n      } else {\n        if (res && res['message']) Toast.fail(res['message'], 1);\n      }\n    }, erro => {\n      this.loadingEnd();\n      console.log(erro);\n    });\n  }\n\n  render() {\n    const _this$props = this.props,\n          history = _this$props.history,\n          location = _this$props.location;\n    const pageProps = {\n      history,\n      location\n    };\n    return React.createElement(\"div\", {\n      className: \"App\",\n      onScrollCapture: () => this.onScrollEvent(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(BackBar, Object.assign({}, pageProps, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    })), React.createElement(DetailTop, Object.assign({}, pageProps, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    })), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }), React.createElement(TabsTop, Object.assign({\n      activeid: 0\n    }, pageProps, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    })), React.createElement(DropMenu, Object.assign({}, pageProps, {\n      fixTop: this.state.menuTop,\n      ref: leftB => {\n        this.rightBtn = leftB;\n      },\n      isAlpha: this.state.isAlpha,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    })), React.createElement(TwoItem, {\n      fixMain: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }), React.createElement(ThreeItem, {\n      fixMain: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }), React.createElement(FourItem, {\n      fixMain: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }), React.createElement(FourItem, {\n      fixMain: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/mljfnn/Desktop/demos/react/antkit/src/views/SearchResult.jsx"],"names":["React","TabsTop","DropMenu","TwoItem","ThreeItem","FourItem","DetailTop","BackBar","ReactDOM","App","Component","constructor","props","rowData","data","state","loading","width","margin","map","item","index","goods_list","length","tabClick","tabActive","setState","netListdata","tabTypeID","dropFun","dropActive","dropTypeID","onScrollEvent","scollNum","thisNum","parseInt","isAlpha","changeAlpha","lock","setTimeout","menuTop","dataSource","componentWillUnmount","componentDidMount","topV","findDOMNode","rightBtn","offsetTop","loadingEnd","loadingStart","cid","num","req","thisUrl","api","index_list","get","res","Toast","fail","erro","console","log","render","history","location","pageProps","leftB"],"mappings":"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","sourcesContent":["import React from 'react';\nimport TabsTop from '../components/TabsTop.jsx';\nimport DropMenu from '../components/DropMenu.jsx';\nimport TwoItem from '../components/TwoItem.jsx';\nimport ThreeItem from '../components/ThreeItem.jsx';\nimport FourItem from '../components/FourItem.jsx';\nimport DetailTop from '../components/DetailTop';\nimport BackBar from '../components/BackBar';\nimport ReactDOM from 'react-dom';\nclass App extends React.Component {\n  constructor(props){\n    super(props);\n    this.scollNum=0;\n    this.state={\n      menuTop:338,\n      isAlpha:false,\n      dataSource:[],\n      tabActive:0,\n      dropActive:0,\n      loading:false,\n    }\n    this.changeAlpha=false;\n    this.lock=false;\n    this.loading=false;\n  }\n  componentWillUnmount(){\n    this.lock=true;\n  }\n  componentDidMount() {\n     let topV=ReactDOM.findDOMNode(this.rightBtn).offsetTop;\n     topV=topV+58;\n     this.setState({menuTop:topV});\n     this.netListdata();\n   }\n   loadingEnd(){\n    this.loading=false;\n    if(!this.lock)this.setState({loading:false});\n  }\n  loadingStart(){\n    this.loading=true;\n    this.setState({loading:true});\n  }\n  netListdata(cid,num){\n    /*\n    cid 3 美妆 4 日用品 6 美食 \n    num 0 全部 2\b 两个组合\n    */\n   let req=\"?cid=\"+(cid?cid:tabTypeID[this.state.tabActive])+\"&num=\"+(num?num:dropTypeID[this.state.dropActive]);\n   let thisUrl=api.index_list+req;\n    if(this.loading)return;\n    this.loadingStart();\n    get(thisUrl,(res)=>{\n      this.loadingEnd();\n      //console.log(res);\n      if(res&&res['result']==='success'){\n        this.setState({dataSource:res['data']});\n      }else{\n        if(res&&res['message'])Toast.fail(res['message'], 1);\n      }\n    },(erro)=>{\n      this.loadingEnd();\n      console.log(erro);\n    });\n  }\n  rowData=(data)=>{\n    return (<div>\n     {this.state.loading?<div style={{width:\"28vw\",margin:\"auto\"}}><ActivityIndicator text=\"正在加载...\" color=\"white\"/></div>:null}\n     {data.map((item,index)=>{\n       switch(item.goods_list.length){\n         case 2:\n           return <TwoItem itemData={item} key={index}/>;\n           //break;\n        case 3:\n            return <ThreeItem itemData={item} key={index}/>;\n            //break;\n        case 4:\n            return <FourItem itemData={item} key={index}/>;\n          //break;\n        default:\n            return <div key={index}>erro</div>;\n       }\n     })}\n    </div>);\n  }\n  tabClick=(index)=>{\n    if(index!==this.state.tabActive){\n      this.setState({tabActive:index});\n      this.netListdata(tabTypeID[index]);\n    }\n  }\n  dropFun=(index)=>{\n    if(index!==this.state.dropActive){\n      this.setState({dropActive:index});\n      this.netListdata(null,dropTypeID[index]);\n    }\n  }\n   onScrollEvent=()=>{\n    this.scollNum++;\n    let thisNum=parseInt(this.scollNum,10);\n      if(!this.state.isAlpha&&!this.changeAlpha&&!this.lock){\n        this.setState({isAlpha:true});\n        this.changeAlpha=true;\n      }\n    setTimeout(()=>{this.changeAlpha=false;},300);\n    setTimeout(()=>{  \n      if(thisNum===this.scollNum){\n        if(this.state.isAlpha)this.setState({isAlpha:false});\n        }\n     },500);\n    }\n    render() {\n      const { history,location }=this.props;\n      const pageProps={history,location};\n      \n        return(\n          <div className=\"App\" onScrollCapture={() => this.onScrollEvent()}>\n            <BackBar {...pageProps}/>\n            <DetailTop {...pageProps}/>\n            <br/>\n            <TabsTop activeid={0} {...pageProps}/>\n            <DropMenu {...pageProps} fixTop={this.state.menuTop} ref={leftB=>{this.rightBtn=leftB}} isAlpha={this.state.isAlpha}/>\n            <TwoItem fixMain={true}/>\n            <ThreeItem fixMain={true}/>\n            <FourItem fixMain={true}/>\n            <FourItem fixMain={true}/>\n          </div>\n        );\n    }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}