{"ast":null,"code":"import \"antd-mobile/lib/toast/style/css\";\nimport _Toast from \"antd-mobile/lib/toast\";\nimport \"antd-mobile/lib/activity-indicator/style/css\";\nimport _ActivityIndicator from \"antd-mobile/lib/activity-indicator\";\nvar _jsxFileName = \"/Users/mljfnn/Desktop/demos/react/antkit/src/views/CustomResult.jsx\";\nimport React from 'react';\nimport BackBar from '../components/BackBar';\nimport '../assets/css/CustomResult.css';\nimport CustomSelect from '../components/CustomSelect';\nimport ItemCuntom from '../components/ItemCuntom';\nimport { api } from '../config/Api';\nimport { get } from '../utils/NetWorking';\nimport { getsearch } from '../utils/Help';\n\nconst EmptyList = () => React.createElement(\"div\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 10\n  },\n  __self: this\n}, React.createElement(\"div\", {\n  className: \"half\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 10\n  },\n  __self: this\n}, React.createElement(ItemCuntom, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 10\n  },\n  __self: this\n})), React.createElement(\"div\", {\n  className: \"half\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 10\n  },\n  __self: this\n}, React.createElement(ItemCuntom, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 10\n  },\n  __self: this\n})), React.createElement(\"div\", {\n  className: \"half\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 10\n  },\n  __self: this\n}, React.createElement(ItemCuntom, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 10\n  },\n  __self: this\n})), React.createElement(\"div\", {\n  className: \"half\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 10\n  },\n  __self: this\n}, React.createElement(ItemCuntom, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 10\n  },\n  __self: this\n})), React.createElement(\"div\", {\n  className: \"half\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 10\n  },\n  __self: this\n}, React.createElement(ItemCuntom, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 10\n  },\n  __self: this\n})), React.createElement(\"div\", {\n  className: \"half\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 10\n  },\n  __self: this\n}, React.createElement(ItemCuntom, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 10\n  },\n  __self: this\n})), React.createElement(\"div\", {\n  className: \"half\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 10\n  },\n  __self: this\n}, React.createElement(ItemCuntom, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 10\n  },\n  __self: this\n})));\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.dropFun = price => {\n      this.setState({\n        nowprice: price\n      });\n    };\n\n    this.rowData = data => {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, this.state.loading ? React.createElement(\"div\", {\n        style: {\n          width: \"28vw\",\n          margin: \"auto\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, React.createElement(_ActivityIndicator, {\n        text: \"\\u6B63\\u5728\\u52A0\\u8F7D...\",\n        color: \"white\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      })) : null, data.map((item, index) => {\n        return React.createElement(\"div\", {\n          className: \"half\",\n          key: index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64\n          },\n          __self: this\n        }, React.createElement(ItemCuntom, {\n          itemData: item,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64\n          },\n          __self: this\n        }));\n      }));\n    };\n\n    const searchA = getsearch(this.props.location);\n    this.state = {\n      nowprice: searchA['price'] ? searchA['price'] : 0,\n      cids: searchA['tag'],\n      dataSource: [],\n      loading: false\n    };\n    this.lock = false;\n    this.loading = false; //console.log(this.state);\n  }\n\n  componentDidMount() {\n    this.netListdata(this.state.nowprice, this.state.cids);\n  }\n\n  componentWillUnmount() {\n    this.lock = true;\n  }\n\n  loadingEnd() {\n    this.loading = false;\n    if (!this.lock) this.setState({\n      loading: false\n    });\n  }\n\n  loadingStart() {\n    this.loading = true;\n    this.setState({\n      loading: true\n    });\n  }\n\n  netListdata(price, cids) {\n    let req = \"?price=\" + price + \"&cid_list=\" + cids;\n    let thisUrl = api.cunstom_list + req;\n    if (this.loading) return;\n    this.loadingStart();\n    get(thisUrl, res => {\n      this.loadingEnd();\n      console.log(res);\n\n      if (res && res['result'] === 'success') {\n        this.setState({\n          dataSource: res['data']\n        });\n      } else {\n        if (res && res['message']) _Toast.fail(res['message'], 1);\n      }\n    }, erro => {\n      this.loadingEnd();\n      console.log(erro);\n    });\n  }\n\n  render() {\n    const _this$props = this.props,\n          history = _this$props.history,\n          location = _this$props.location;\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(BackBar, {\n      history: history,\n      title: \"\\u81EA\\u5B9A\\u4E49\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"CustomResultBox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(CustomSelect, {\n      price: 110,\n      dropFun: this.dropFun,\n      location: location,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"CustomResultTxt\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, \"\\u8D2D\\u7269\\u6D25\\u8D34\\u51D1\\u5355\\u662F\\u6839\\u636E\\u539F\\u4EF7\\u8BA1\\u7B97\\u54E6\\uFF5E\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }), \"\\u53EF\\u4EE5\\u4EE5\\u5238\\u540E\\u4EF7\\u5165\\u624B\\uFF0C\\u8FBE\\u5230\\u6EE1\\u51CF\\u7684\\u8981\\u6C42\\u54E6\\uFF5E\"), React.createElement(\"div\", {\n      className: \"CustomResultList\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, this.state.dataSource && this.state.dataSource.length > 0 ? this.rowData(this.state.dataSource) : React.createElement(EmptyList, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/mljfnn/Desktop/demos/react/antkit/src/views/CustomResult.jsx"],"names":["React","BackBar","CustomSelect","ItemCuntom","api","get","getsearch","EmptyList","App","Component","constructor","props","dropFun","price","setState","nowprice","rowData","data","state","loading","width","margin","map","item","index","searchA","location","cids","dataSource","lock","componentDidMount","netListdata","componentWillUnmount","loadingEnd","loadingStart","req","thisUrl","cunstom_list","res","console","log","fail","erro","render","history","length"],"mappings":"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","sourcesContent":["import React from 'react';\nimport BackBar from '../components/BackBar';\nimport '../assets/css/CustomResult.css';\nimport CustomSelect from '../components/CustomSelect';\nimport ItemCuntom from '../components/ItemCuntom';\nimport { api } from '../config/Api';\nimport { get } from '../utils/NetWorking';\nimport { getsearch } from '../utils/Help';\nimport { Toast,ActivityIndicator } from 'antd-mobile';\nconst EmptyList=()=>(<div><div className=\"half\"><ItemCuntom/></div><div className=\"half\"><ItemCuntom/></div><div className=\"half\"><ItemCuntom/></div><div className=\"half\"><ItemCuntom/></div><div className=\"half\"><ItemCuntom/></div><div className=\"half\"><ItemCuntom/></div><div className=\"half\"><ItemCuntom/></div></div>)\nclass App extends React.Component {\n    constructor(props){\n      super(props);\n      const searchA=getsearch(this.props.location);\n      this.state={\n        nowprice:searchA['price']?searchA['price']:0,\n        cids:searchA['tag'],\n        dataSource:[],\n        loading:false,\n      }\n      this.lock=false;\n      this.loading=false;\n      //console.log(this.state);\n    }\n    dropFun=(price)=>{\n      this.setState({nowprice:price});\n    }\n    componentDidMount(){\n      this.netListdata(this.state.nowprice,this.state.cids);\n    }\n    componentWillUnmount(){\n      this.lock=true;\n    }\n    loadingEnd(){\n      this.loading=false;\n      if(!this.lock)this.setState({loading:false});\n    }\n    loadingStart(){\n      this.loading=true;\n      this.setState({loading:true});\n    }\n    netListdata(price,cids){\n     let req=\"?price=\"+price+\"&cid_list=\"+cids;\n     let thisUrl=api.cunstom_list+req;\n      if(this.loading)return;\n      this.loadingStart();\n      get(thisUrl,(res)=>{\n        this.loadingEnd();\n        console.log(res);\n        if(res&&res['result']==='success'){\n          this.setState({dataSource:res['data']});\n        }else{\n          if(res&&res['message'])Toast.fail(res['message'], 1);\n        }\n      },(erro)=>{\n        this.loadingEnd();\n        console.log(erro);\n      });\n    }\n    rowData=(data)=>{\n      return (<div>\n       {this.state.loading?<div style={{width:\"28vw\",margin:\"auto\"}}><ActivityIndicator text=\"正在加载...\" color=\"white\"/></div>:null}\n       {data.map((item,index)=>{\n         return <div className=\"half\" key={index}><ItemCuntom itemData={item}/></div>\n       })}\n      </div>);\n    }\n    render() {\n      const { history,location }=this.props;\n        return(\n          <div className=\"App\">\n            <BackBar history={history} title=\"自定义\"/>\n            <div className=\"CustomResultBox\">\n              <CustomSelect price={110} dropFun={this.dropFun} location={location}/>\n              <div className=\"CustomResultTxt\">购物津贴凑单是根据原价计算哦～<br/>\n               可以以券后价入手，达到满减的要求哦～</div>\n               <div className=\"CustomResultList\">\n                   {this.state.dataSource&&this.state.dataSource.length>0?this.rowData(this.state.dataSource):<EmptyList/>}\n               </div>\n           </div>\n          </div>\n        );\n    }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}